<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<title>Simple countdown timer (clock-synced)</title>


		<style type="text/css">
			body {
				font-size: 100px;
			}
			span {
				display: inline-block;
				text-align: center;
			}
		</style>


		<script type="text/javascript">
/*
	'Variables from URL' code written by Chris Coyier of css-tricks.com
		https://css-tricks.com/snippets/javascript/get-url-variables/

	Everything else by TanzNukeTerror
*/

			document.addEventListener('DOMContentLoaded', function(){	// When document is loaded
				function getQueryVariable(variable) {
					var query = window.location.search.substring(1);
					vars = query.split('&');
					for (var i = 0; i < vars.length; i++){
						var pair = vars[i].split('=');
						if(pair[0] == variable) {
							return pair[1];
						}
					}
					return(false);
				}



				var dur_minutes = getQueryVariable('minutes') || 5;
				var dur_seconds = dur_minutes*60;

				var end = ((new Date().getTime())/1000)+dur_seconds;
				var cur, diff, minutes, seconds = 0;
				var timestamp = '';

				function updateTimer(){
					cur = (new Date().getTime())/1000;
					diff = Math.ceil(end - cur);

					if (diff == 0) {
						clearInterval(timerinterval);
					}

					minutes = Math.floor(diff/60);											// do the minutes
					seconds = ('0' + (diff-(minutes*60))).slice(-2);						// do the seconds

					timestamp = minutes + ':' + seconds;									// join them
					timestamp = timestamp.split('');										// split it all
					timestamp = '<span>' + timestamp.join('</span><span>') + '</span>';		// Join it all, but with <span> in front, </span><span> between, and </span> at the end
					
//					document.body.innerText = minutes + ':' + seconds;	// old
					document.body.innerHTML = timestamp;									// Put it on the page

				}
				
				updateTimer();

				var timerinterval = setInterval(updateTimer, 1000);
			});
		</script>
	</head>



	<body>
		
	</body>
</html>
